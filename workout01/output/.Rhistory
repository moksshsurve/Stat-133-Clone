library(grid)
library(ggplot2)
court_file <- "/Users/moksshsurve/Desktop/Documents/Berkeley/Semesters/Sophomore/SPRING\ 19/Stat\ 133/hw-stat133/workout01/images/nba-court.jpg"
court_image <- rasterGrob( readJPEG(court_file), width = unit(1, "npc"), height = unit(1, "npc"))
court_file <- "/Users/moksshsurve/Desktop/Documents/Berkeley/Semesters/Sophomore/SPRING\ 19/Stat\ 133/hw-stat133/workout01/images/nba-court.jpg"
#4) Shot Charts
library(jpeg)
library(grid)
library(ggplot2)
court_file <- "/Users/moksshsurve/Desktop/Documents/Berkeley/Semesters/Sophomore/SPRING\ 19/Stat\ 133/hw-stat133/workout01/images/nba-court.jpg"
court_image <- rasterGrob( readJPEG(court_file), width = unit(1, "npc"), height = unit(1, "npc"))
#4) Shot Charts
library(jpeg)
library(grid)
library(ggplot2)
court_file <- "/Users/moksshsurve/Desktop/Documents/Berkeley/Semesters/Sophomore/SPRING\ 19/Stat\ 133/hw-stat133/workout01/images/nba-court.jpg"
court_image <- rasterGrob( readJPEG(court_file), width = unit(1, "npc"), height = unit(1, "npc"))
setwd("/Users/moksshsurve/Desktop/Documents/Berkeley/Semesters/Sophomore/SPRING\ 19/Stat\ 133/hw-stat133/workout01/images/")
setwd("/Users/moksshsurve/Desktop/Documents/Berkeley/Semesters/Sophomore/SPRING\ 19/Stat\ 133/hw-stat133/workout01/images/")
court_file <- "nba-court.jpg"
court_image <- rasterGrob( readJPEG(court_file), width = unit(1, "npc"), height = unit(1, "npc"))
getwd()
#4) Shot Charts
library(jpeg)
library(grid)
library(ggplot2)
setwd("/Users/moksshsurve/Desktop/Documents/Berkeley/Semesters/Sophomore/SPRING\ 19/Stat\ 133/hw-stat133/workout01/images/")
court_file <- "nba-court.jpg"
court_image <- rasterGrob( readJPEG(court_file), width = unit(1, "npc"), height = unit(1, "npc"))
#4.1) Shot charts for each player
iguodala_shot_chart <- ggplot(data = iguodala) + annotation_custom(court_image, -250, 250, -50, 420) + geom_point(aes(x=x, y=y, color=shot_made_flag)) + ylim(-50, 420) + ggtitle("Shot Chart: Andre Iguodala (2016 Season)") + theme_minimal()
green_shot_chart <- ggplot(data = green) + annotation_custom(court_image, -250, 250, -50, 420) + geom_point(aes(x=x, y=y, color=shot_made_flag)) + ylim(-50, 420) + ggtitle("Shot Chart: Draymond Green (2016 Season)") + theme_minimal()
durant_shot_chart <- ggplot(data = durant) + annotation_custom(court_image, -250, 250, -50, 420) + geom_point(aes(x=x, y=y, color=shot_made_flag)) + ylim(-50, 420) + ggtitle("Shot Chart: Kevin Durant (2016 Season)") + theme_minimal()
thompson_shot_chart <- ggplot(data = thompson) + annotation_custom(court_image, -250, 250, -50, 420) + geom_point(aes(x=x, y=y, color =shot_made_flag)) + ylim(-50, 420) + ggtitle("Shot Chart: Klay Thompson (2016 Season)") + theme_minimal()
curry_shot_chart <- ggplot(data = curry) + annotation_custom(court_image, -250, 250, -50, 420) + geom_point(aes(x=x, y=y, color=shot_made_flag)) + ylim(-50, 420) + ggtitle("Shot Chart: Steph Curry (2016 Season)") + theme_minimal()
ggsave("andre-iguodala-shot-chart.pdf", plot = iguodala_shot_chart, width = 6.5, height = 5)
ggsave("draymond-green-shot-chart.pdf", plot = green_shot_chart, width = 6.5, height = 5)
ggsave("kevin-durant-shot-chart.pdf", plot = durant_shot_chart, width = 6.5, height = 5)
ggsave("klay-thompson-shot-chart.pdf", plot = thompson_shot_chart, width = 6.5, height = 5)
ggsave("stephen-curry-shot-chart.pdf", plot = curry_shot_chart, width = 6.5, height = 5)
#4.1) Shot charts for each player
iguodala_shot_chart <- ggplot(data = iguodala) + annotation_custom(court_image, -250, 250, -50, 420) + geom_point(aes(x=x, y=y, color=shot_made_flag)) + ylim(-50, 420) + ggtitle("Shot Chart: Andre Iguodala (2016 Season)") + theme_minimal()
green_shot_chart <- ggplot(data = green) + annotation_custom(court_image, -250, 250, -50, 420) + geom_point(aes(x=x, y=y, color=shot_made_flag)) + ylim(-50, 420) + ggtitle("Shot Chart: Draymond Green (2016 Season)") + theme_minimal()
setwd("/Users/moksshsurve/Desktop/Documents/Berkeley/Semesters/Sophomore/SPRING\ 19/Stat\ 133/hw-stat133/workout01/data")
iguodala = read.csv("andre-iguodala.csv", stringsAsFactors = FALSE)
green = read.csv("draymond-green.csv", stringsAsFactors = FALSE)
durant = read.csv("kevin-durant.csv", stringsAsFactors = FALSE)
thompson = read.csv("klay-thompson.csv", stringsAsFactors = FALSE)
curry <- read.csv("stephen-curry.csv", stringsAsFactors = FALSE)
setwd("/Users/moksshsurve/Desktop/Documents/Berkeley/Semesters/Sophomore/SPRING\ 19/Stat\ 133/hw-stat133/workout01/images/")
court_file <- "nba-court.jpg"
court_image <- rasterGrob( readJPEG(court_file), width = unit(1, "npc"), height = unit(1, "npc"))
#4.1) Shot charts for each player
iguodala_shot_chart <- ggplot(data = iguodala) + annotation_custom(court_image, -250, 250, -50, 420) + geom_point(aes(x=x, y=y, color=shot_made_flag)) + ylim(-50, 420) + ggtitle("Shot Chart: Andre Iguodala (2016 Season)") + theme_minimal()
green_shot_chart <- ggplot(data = green) + annotation_custom(court_image, -250, 250, -50, 420) + geom_point(aes(x=x, y=y, color=shot_made_flag)) + ylim(-50, 420) + ggtitle("Shot Chart: Draymond Green (2016 Season)") + theme_minimal()
durant_shot_chart <- ggplot(data = durant) + annotation_custom(court_image, -250, 250, -50, 420) + geom_point(aes(x=x, y=y, color=shot_made_flag)) + ylim(-50, 420) + ggtitle("Shot Chart: Kevin Durant (2016 Season)") + theme_minimal()
thompson_shot_chart <- ggplot(data = thompson) + annotation_custom(court_image, -250, 250, -50, 420) + geom_point(aes(x=x, y=y, color =shot_made_flag)) + ylim(-50, 420) + ggtitle("Shot Chart: Klay Thompson (2016 Season)") + theme_minimal()
curry_shot_chart <- ggplot(data = curry) + annotation_custom(court_image, -250, 250, -50, 420) + geom_point(aes(x=x, y=y, color=shot_made_flag)) + ylim(-50, 420) + ggtitle("Shot Chart: Steph Curry (2016 Season)") + theme_minimal()
ggsave("andre-iguodala-shot-chart.pdf", plot = iguodala_shot_chart, width = 6.5, height = 5)
ggsave("draymond-green-shot-chart.pdf", plot = green_shot_chart, width = 6.5, height = 5)
ggsave("kevin-durant-shot-chart.pdf", plot = durant_shot_chart, width = 6.5, height = 5)
ggsave("klay-thompson-shot-chart.pdf", plot = thompson_shot_chart, width = 6.5, height = 5)
ggsave("stephen-curry-shot-chart.pdf", plot = curry_shot_chart, width = 6.5, height = 5)
#4) Shot Charts
library(jpeg)
library(grid)
library(ggplot2)
setwd("/Users/moksshsurve/Desktop/Documents/Berkeley/Semesters/Sophomore/SPRING\ 19/Stat\ 133/hw-stat133/workout01/data")
iguodala = read.csv("andre-iguodala.csv", stringsAsFactors = FALSE)
green = read.csv("draymond-green.csv", stringsAsFactors = FALSE)
durant = read.csv("kevin-durant.csv", stringsAsFactors = FALSE)
thompson = read.csv("klay-thompson.csv", stringsAsFactors = FALSE)
curry <- read.csv("stephen-curry.csv", stringsAsFactors = FALSE)
setwd("/Users/moksshsurve/Desktop/Documents/Berkeley/Semesters/Sophomore/SPRING\ 19/Stat\ 133/hw-stat133/workout01/images")
court_file <- "nba-court.jpg"
court_image <- rasterGrob( readJPEG(court_file), width = unit(1, "npc"), height = unit(1, "npc"))
#4.1) Shot charts for each player
iguodala_shot_chart <- ggplot(data = iguodala) + annotation_custom(court_image, -250, 250, -50, 420) + geom_point(aes(x=x, y=y, color=shot_made_flag)) + ylim(-50, 420) + ggtitle("Shot Chart: Andre Iguodala (2016 Season)") + theme_minimal()
green_shot_chart <- ggplot(data = green) + annotation_custom(court_image, -250, 250, -50, 420) + geom_point(aes(x=x, y=y, color=shot_made_flag)) + ylim(-50, 420) + ggtitle("Shot Chart: Draymond Green (2016 Season)") + theme_minimal()
durant_shot_chart <- ggplot(data = durant) + annotation_custom(court_image, -250, 250, -50, 420) + geom_point(aes(x=x, y=y, color=shot_made_flag)) + ylim(-50, 420) + ggtitle("Shot Chart: Kevin Durant (2016 Season)") + theme_minimal()
thompson_shot_chart <- ggplot(data = thompson) + annotation_custom(court_image, -250, 250, -50, 420) + geom_point(aes(x=x, y=y, color =shot_made_flag)) + ylim(-50, 420) + ggtitle("Shot Chart: Klay Thompson (2016 Season)") + theme_minimal()
curry_shot_chart <- ggplot(data = curry) + annotation_custom(court_image, -250, 250, -50, 420) + geom_point(aes(x=x, y=y, color=shot_made_flag)) + ylim(-50, 420) + ggtitle("Shot Chart: Steph Curry (2016 Season)") + theme_minimal()
ggsave("andre-iguodala-shot-chart.pdf", plot = iguodala_shot_chart, width = 6.5, height = 5)
ggsave("draymond-green-shot-chart.pdf", plot = green_shot_chart, width = 6.5, height = 5)
ggsave("kevin-durant-shot-chart.pdf", plot = durant_shot_chart, width = 6.5, height = 5)
ggsave("klay-thompson-shot-chart.pdf", plot = thompson_shot_chart, width = 6.5, height = 5)
ggsave("stephen-curry-shot-chart.pdf", plot = curry_shot_chart, width = 6.5, height = 5)
#4.2) Facetted Shot chart
gsw_shots_chart = ggplot(data = shots_table) + annotation_custom(court_image, -250, 250, -50, 420) + geom_point(aes(x=x, y=y, color=shot_made_flag)) + ylim(-50, 420) + ggtitle('Shot Charts: GSW (2016 season)') + theme_minimal() + facet_wrap(~ name, ncol = 3)
ggsave("gsw_shots_chart.pdf", width = 8 , height = 7)
ggsave("gsw_shots_chart.png", width = 8, height = 7)
setwd("/Users/moksshsurve/Desktop/Documents/Berkeley/Semesters/Sophomore/SPRING\ 19/Stat\ 133/hw-stat133/workout01/data")
combined_data <- read.csv("shots-data.csv", stringsAsFactors = FALSE)
setwd("/Users/moksshsurve/Desktop/Documents/Berkeley/Semesters/Sophomore/SPRING\ 19/Stat\ 133/hw-stat133/workout01/images")
getwd()
setwd("/Users/moksshsurve/Desktop/Documents/Berkeley/Semesters/Sophomore/SPRING\ 19/Stat\ 133/hw-stat133/workout01/data")
getwd()
library(dplyr)
library(ggplot2)
setwd("/Users/moksshsurve/Desktop/Documents/Berkeley/Semesters/Sophomore/SPRING\ 19/Stat\ 133/hw-stat133/workout01/data")
combined_data <- read.csv("shots-data.csv", stringsAsFactors = FALSE)
library(dplyr)
library(ggplot2)
setwd("/Users/moksshsurve/Desktop/Documents/Berkeley/Semesters/Sophomore/SPRING\ 19/Stat\ 133/hw-stat133/workout01/data")
combined_data <- read.csv("./shots-data.csv", stringsAsFactors = FALSE)
iguodala = read.csv("andre-iguodala.csv", stringsAsFactors = FALSE)
green = read.csv("draymond-green.csv", stringsAsFactors = FALSE)
durant = read.csv("kevin-durant.csv", stringsAsFactors = FALSE)
thompson = read.csv("klay-thompson.csv", stringsAsFactors = FALSE)
curry <- read.csv("stephen-curry.csv", stringsAsFactors = FALSE)
combined_data <- read.csv("./shots-data.csv", stringsAsFactors = FALSE)
combined_data <- read.csv("shots-data.csv", stringsAsFactors = FALSE)
combined_data <- read.csv("shots-data.csv", stringsAsFactors = FALSE)
library(dplyr)
library(ggplot2)
setwd("/Users/moksshsurve/Desktop/Documents/Berkeley/Semesters/Sophomore/SPRING\ 19/Stat\ 133/hw-stat133/workout01/data")
#combined_data <- read.csv("./shots-data.csv", stringsAsFactors = FALSE)
column_names = c("row number", "team_name", "game_date", "season", "period", "minutes_remaining", "seconds_remaining",
"shot_made_flag", "action_type", "shot_type", "shot_distance", "opponent", "x", "y", "name", "minute")
column_types = c("character", "character", "character", "integer", "integer", "integer", "integer", "character",
"character", "character", "integer", "character", "integer", "integer", "character", "integer")
combined_data <- read.csv("../data/shots-data.csv", col.names = column_names, colClasses = column_types,
na.strings = "?", sep = ",", stringsAsFactors = FALSE)
library(dplyr)
library(ggplot2)
setwd("/Users/moksshsurve/Desktop/Documents/Berkeley/Semesters/Sophomore/SPRING\ 19/Stat\ 133/hw-stat133/workout01/data")
#combined_data <- read.csv("./shots-data.csv", stringsAsFactors = FALSE)
column_names = c("row number", "team_name", "game_date", "season", "period", "minutes_remaining", "seconds_remaining",
"shot_made_flag", "action_type", "shot_type", "shot_distance", "opponent", "x", "y", "name", "minute")
column_types = c("character", "character", "character", "integer", "integer", "integer", "integer", "character",
"character", "character", "integer", "character", "integer", "integer", "character", "integer")
combined_data <- read.csv("shots-data.csv", col.names = column_names, colClasses = column_types,
na.strings = "?", sep = ",", stringsAsFactors = FALSE)
library(dplyr)
library(ggplot2)
setwd("/Users/moksshsurve/Desktop/Documents/Berkeley/Semesters/Sophomore/SPRING\ 19/Stat\ 133/hw-stat133/workout01/data")
combined_data <- read.csv("../data/shots-data.csv", stringsAsFactors = FALSE)
library(dplyr)
library(ggplot2)
setwd("/Users/moksshsurve/Desktop/Documents/Berkeley/Semesters/Sophomore/SPRING\ 19/Stat\ 133/hw-stat133/workout01/data")
combined_data <- read.csv("../data/shots-data.csv", stringsAsFactors = FALSE)
library(dplyr)
library(ggplot2)
combined_data <- read.csv("../data/shots-data.csv", stringsAsFactors = FALSE)
library(dplyr)
library(ggplot2)
combined_data <- read.csv("../data/shots-data.csv/", stringsAsFactors = FALSE)
library(dplyr)
library(ggplot2)
setwd("/Users/moksshsurve/Desktop/Documents/Berkeley/Semesters/Sophomore/SPRING\ 19/Stat\ 133/hw-stat133/workout01/data")
combined_data <- read.csv("/shots-data.csv", stringsAsFactors = FALSE)
library(dplyr)
library(ggplot2)
setwd("/Users/moksshsurve/Desktop/Documents/Berkeley/Semesters/Sophomore/SPRING\ 19/Stat\ 133/hw-stat133/workout01/data")
combined_data <- read.csv("shots-data.csv", stringsAsFactors = FALSE)
getwd()
setwd("/Users/moksshsurve/Desktop/Documents/Berkeley/Semesters/Sophomore/SPRING\ 19/Stat\ 133/hw-stat133/workout01/data")
combined_data <- read.csv("shots-data.csv", stringsAsFactors = FALSE)
cd
combined_data <- read.csv("/Users/moksshsurve/Desktop/Documents/Berkeley/Semesters/Sophomore/SPRING\ 19/Stat\ 133/hw-stat133/workout01/data/shots-data.csv", stringsAsFactors = FALSE)
library(dplyr)
library(ggplot2)
combined_data <- read.csv(file="/Users/moksshsurve/Desktop/Documents/Berkeley/Semesters/Sophomore/SPRING\ 19/Stat\ 133/hw-stat133/workout01/data/shots-data.csv", stringsAsFactors = FALSE)
library(dplyr)
library(ggplot2)
library(grid)
combined_data <- read.csv(file="/Users/moksshsurve/Desktop/Documents/Berkeley/Semesters/Sophomore/SPRING\ 19/Stat\ 133/hw-stat133/workout01/data/shots-data.csv", stringsAsFactors = FALSE)
library(dplyr)
library(ggplot2)
setwd("/Users/moksshsurve/Desktop/Documents/Berkeley/Semesters/Sophomore/SPRING\ 19/Stat\ 133/hw-stat133/workout01/data")
combined_data <- read.csv("../shots-data.csv", stringsAsFactors = FALSE)
knitr::opts_chunk$set(echo = TRUE, fig.path = "/Users/moksshsurve/Desktop/Documents/Berkeley/Semesters/Sophomore/SPRING\ 19/Stat\ 133/hw-stat133/workout01")
library(dplyr)
library(ggplot2)
combined_data <- read.csv("data/shots-data.csv", stringsAsFactors = FALSE)
knitr::opts_chunk$set(echo = TRUE, fig.path = "/Users/moksshsurve/Desktop/Documents/Berkeley/Semesters/Sophomore/SPRING\ 19/Stat\ 133/hw-stat133/workout01")
library(dplyr)
library(ggplot2)
combined_data <- read.csv("data/shots-data.csv", stringsAsFactors = FALSE)
getwd()
knitr::opts_knit$set(root.dir = "/Users/moksshsurve/Desktop/Documents/Berkeley/Semesters/Sophomore/SPRING\ 19/Stat\ 133/hw-stat133/workout01")
getwd()
knitr::opts_knit$set(root.dir = "/Users/moksshsurve/Desktop/Documents/Berkeley/Semesters/Sophomore/SPRING\ 19/Stat\ 133/hw-stat133/workout01")
library(dplyr)
library(ggplot2)
combined_data <- read.csv("data/shots-data.csv", stringsAsFactors = FALSE)
knitr::opts_knit$set(root.dir = "/Users/moksshsurve/Desktop/Documents/Berkeley/Semesters/Sophomore/SPRING\ 19/Stat\ 133/hw-stat133/workout01/data")
library(dplyr)
library(ggplot2)
combined_data <- read.csv("shots-data.csv", stringsAsFactors = FALSE)
getwd()
setwd("/Users/moksshsurve/Desktop/Documents/Berkeley/Semesters/Sophomore/SPRING\ 19/Stat\ 133/hw-stat133/workout01")
getwd()
read.csv("data/shots-data.csv", stringsAsFactors = FALSE)
write.csv(stacked, file = 'shots-data.csv')
### ---------------------------
#Title: Data Preparation
#Description: Data importing and preparation for visualisation & grouping for analysis
#Inputs: csv files with scoring data for Iguodala, Green, Durant, Thompson & Curry
#Outputs: Modified Data frames and combined tables ready for visualisation purposes
### ---------------------------
#reading files into data frames
setwd("/Users/moksshsurve/Desktop/Documents/Berkeley/Semesters/Sophomore/SPRING\ 19/Stat\ 133/hw-stat133/workout01/data")
iguodala = read.csv("andre-iguodala.csv", stringsAsFactors = FALSE)
green = read.csv("draymond-green.csv", stringsAsFactors = FALSE)
durant = read.csv("kevin-durant.csv", stringsAsFactors = FALSE)
thompson = read.csv("klay-thompson.csv", stringsAsFactors = FALSE)
curry <- read.csv("stephen-curry.csv", stringsAsFactors = FALSE)
combined_data <- read.csv("shots-data.csv", stringsAsFactors = FALSE)
#adding column 'name'
iguodala$name <- 'Andre Iguodala'
green$name <- 'Draymond Green'
durant$name <- 'Kevin Durant'
thompson$name <- 'Kevin Thompson'
curry$name <- 'Stephen Curry'
#adding more descriptive shot_made_flag values
iguodala$shot_made_flag[iguodala$shot_made_flag == 'n'] <- 'shot_no'
iguodala$shot_made_flag[iguodala$shot_made_flag == 'y'] <- 'shot_yes'
green$shot_made_flag[green$shot_made_flag == 'n'] <- 'shot_no'
green$shot_made_flag[green$shot_made_flag == 'y'] <- 'shot_yes'
durant$shot_made_flag[durant$shot_made_flag == 'n'] <- 'shot_no'
durant$shot_made_flag[durant$shot_made_flag == 'y'] <- 'shot_yes'
thompson$shot_made_flag[thompson$shot_made_flag == 'n'] <- 'shot_no'
thompson$shot_made_flag[thompson$shot_made_flag == 'y'] <- 'shot_yes'
curry$shot_made_flag[curry$shot_made_flag == 'n'] <- 'shot_no'
curry$shot_made_flag[curry$shot_made_flag == 'y'] <- 'shot_yes'
#adding column 'minute'
iguodala$minute <- (iguodala$period*12) - iguodala$minutes_remaining
green$minute <- (green$period*12) - green$minutes_remaining
durant$minute <- (durant$period*12) - durant$minutes_remaining
thompson$minute <- (thompson$period*12) - thompson$minutes_remaining
curry$minute <- (curry$period*12) - curry$minutes_remaining
#sinking summary for each player
setwd("../output")
sink("andre-iguodala-summary.txt")
summary(iguodala)
sink()
sink("graymond-green-summary.txt")
summary(green)
sink()
sink("kevin-durant-summary.txt")
summary(durant)
sink()
sink("klay-thompson-summary.txt")
summary(thompson)
sink()
sink("stephen-curry-summary.txt")
summary(curry)
sink()
#stacking up the tables into 1
setwd("../data")
stacked <- rbind(iguodala, green, durant, thompson, curry)
write.csv(stacked, file = 'shots-data.csv')
#sinking summary of stacked table
setwd("../output")
sink("shots-data-summary.txt")
summary(stacked)
sink()
knitr::opts_knit$set(root.dir = "/Users/moksshsurve/Desktop/Documents/Berkeley/Semesters/Sophomore/SPRING\ 19/Stat\ 133/hw-stat133/workout01")
library(dplyr)
library(ggplot2)
combined_data <- read.csv("data/shots-data.csv", stringsAsFactors = FALSE)
combined_data
library(dplyr)
library(ggplot2)
combined_data <- read.csv("../data/shots-data.csv", col.names = column_names, colClasses = column_types,
na.strings = "?", sep = ",", stringsAsFactors = FALSE)
library(dplyr)
library(ggplot2)
combined_data <- read.csv("data/shots-data.csv", col.names = column_names, colClasses = column_types,
na.strings = "?", sep = ",", stringsAsFactors = FALSE)
library(dplyr)
library(ggplot2)
combined_data <- read.csv("data/shots-data.csv", stringsAsFactors = FALSE)
library(dplyr)
library(ggplot2)
combined_data <- read.csv("data/shots-data.csv", stringsAsFactors = FALSE)
effective_shooting_bp <- combined_data %>% select(name, shot_made_flag) %>% mutate(count = 1) %>% group_by(name) %>% summarise(total = n(), made = sum(shot_made_flag == "made shot")) %>% mutate(percentage = made / total) %>% arrange(desc(percentage))
effective_shooting_bp <- as_tibble(effective_shooting_bp)
effective_shooting_bp
two_percent <- combined_data %>% select(name, shot_made_flag, shot_type) %>% mutate(count = 1) %>% group_by(name) %>% summarise(total = sum(shot_type == "2PT Field Goal"), made = sum(shot_made_flag == "made shot" & shot_type == "2PT Field Goal")) %>% mutate(percentage = made / total) %>% arrange(desc(percentage))
two_percent
three_percent <- combined_data %>% select(name, shot_made_flag, shot_type) %>% mutate(count = 1) %>% group_by(name) %>% summarise(total = sum(shot_type == "3PT Field Goal"), made = sum(count[shot_made_flag == "made shot" & shot_type == "3PT Field Goal"])) %>% mutate(percentage = made / total) %>% arrange(desc(percentage))
three_percent <- as_tibble(three_percent)
three_percent
library(dplyr)
library(ggplot2)
combined_data <- read.csv("data/shots-data.csv", stringsAsFactors = FALSE)
total_shots_bp <- combined_data %>% select(name) %>% group_by(name) %>% summarise(total = n()) %>% arrange(desc(total))
total_shots_bp <- as_tibble(total_shots_bp)
total_shots_bp
effective_shooting_bp <- combined_data %>% select(name, shot_made_flag) %>% mutate(count = 1) %>% group_by(name) %>% summarise(total = n(), made = sum(shot_made_flag == "made shot")) %>% mutate(percentage = made / total) %>% arrange(desc(percentage))
effective_shooting_bp <- as_tibble(effective_shooting_bp)
effective_shooting_bp
two_percent <- combined_data %>% select(name, shot_made_flag, shot_type) %>% mutate(count = 1) %>% group_by(name) %>% summarise(total = sum(shot_type == "2PT Field Goal"), made = sum(shot_made_flag == "made shot" & shot_type == "2PT Field Goal")) %>% mutate(percentage = made / total) %>% arrange(desc(percentage))
two_percent
three_percent <- combined_data %>% select(name, shot_made_flag, shot_type) %>% mutate(count = 1) %>% group_by(name) %>% summarise(total = sum(shot_type == "3PT Field Goal"), made = sum(count[shot_made_flag == "made shot" & shot_type == "3PT Field Goal"])) %>% mutate(percentage = made / total) %>% arrange(desc(percentage))
three_percent <- as_tibble(three_percent)
three_percent
### ---------------------------
#Title: Data Preparation
#Description: Data importing and preparation for visualisation & grouping for analysis
#Inputs: csv files with scoring data for Iguodala, Green, Durant, Thompson & Curry
#Outputs: Modified Data frames and combined tables ready for visualisation purposes
### ---------------------------
#reading files into data frames
setwd("/Users/moksshsurve/Desktop/Documents/Berkeley/Semesters/Sophomore/SPRING\ 19/Stat\ 133/hw-stat133/workout01/data")
iguodala = read.csv("andre-iguodala.csv", stringsAsFactors = FALSE)
green = read.csv("draymond-green.csv", stringsAsFactors = FALSE)
durant = read.csv("kevin-durant.csv", stringsAsFactors = FALSE)
thompson = read.csv("klay-thompson.csv", stringsAsFactors = FALSE)
curry <- read.csv("stephen-curry.csv", stringsAsFactors = FALSE)
combined_data <- read.csv("shots-data.csv", stringsAsFactors = FALSE)
#adding column 'name'
iguodala$name <- 'Andre Iguodala'
green$name <- 'Draymond Green'
durant$name <- 'Kevin Durant'
thompson$name <- 'Klay Thompson'
curry$name <- 'Stephen Curry'
#adding more descriptive shot_made_flag values
iguodala$shot_made_flag[iguodala$shot_made_flag == 'n'] <- 'shot_no'
iguodala$shot_made_flag[iguodala$shot_made_flag == 'y'] <- 'shot_yes'
green$shot_made_flag[green$shot_made_flag == 'n'] <- 'shot_no'
green$shot_made_flag[green$shot_made_flag == 'y'] <- 'shot_yes'
durant$shot_made_flag[durant$shot_made_flag == 'n'] <- 'shot_no'
durant$shot_made_flag[durant$shot_made_flag == 'y'] <- 'shot_yes'
thompson$shot_made_flag[thompson$shot_made_flag == 'n'] <- 'shot_no'
thompson$shot_made_flag[thompson$shot_made_flag == 'y'] <- 'shot_yes'
curry$shot_made_flag[curry$shot_made_flag == 'n'] <- 'shot_no'
curry$shot_made_flag[curry$shot_made_flag == 'y'] <- 'shot_yes'
#adding column 'minute'
iguodala$minute <- (iguodala$period*12) - iguodala$minutes_remaining
green$minute <- (green$period*12) - green$minutes_remaining
durant$minute <- (durant$period*12) - durant$minutes_remaining
thompson$minute <- (thompson$period*12) - thompson$minutes_remaining
curry$minute <- (curry$period*12) - curry$minutes_remaining
#sinking summary for each player
setwd("../output")
sink("andre-iguodala-summary.txt")
summary(iguodala)
sink()
sink("graymond-green-summary.txt")
summary(green)
sink()
sink("kevin-durant-summary.txt")
summary(durant)
sink()
sink("klay-thompson-summary.txt")
summary(thompson)
sink()
sink("stephen-curry-summary.txt")
summary(curry)
sink()
#stacking up the tables into 1
setwd("../data")
stacked <- rbind(iguodala, green, durant, thompson, curry)
write.csv(stacked, file = 'shots-data.csv')
#sinking summary of stacked table
setwd("../output")
sink("shots-data-summary.txt")
summary(stacked)
sink()
library(dplyr)
library(ggplot2)
combined_data <- read.csv("data/shots-data.csv", stringsAsFactors = FALSE)
total_shots_bp <- as_tibble(combined_data %>% select(name) %>% group_by(name) %>% summarise(total = n()) %>% arrange(desc(total)))
total_shots_bp
effective_shooting_bp <- combined_data %>% select(name, shot_made_flag) %>% mutate(count = 1) %>% group_by(name) %>% summarise(total = n(), made = sum(shot_made_flag == "made shot")) %>% mutate(percentage = made / total) %>% arrange(desc(percentage))
effective_shooting_bp <- as_tibble(effective_shooting_bp)
effective_shooting_bp
two_percent <- combined_data %>% select(name, shot_made_flag, shot_type) %>% mutate(count = 1) %>% group_by(name) %>% summarise(total = sum(shot_type == "2PT Field Goal"), made = sum(shot_made_flag == "made shot" & shot_type == "2PT Field Goal")) %>% mutate(percentage = made / total) %>% arrange(desc(percentage))
two_percent
three_percent <- combined_data %>% select(name, shot_made_flag, shot_type) %>% mutate(count = 1) %>% group_by(name) %>% summarise(total = sum(shot_type == "3PT Field Goal"), made = sum(count[shot_made_flag == "made shot" & shot_type == "3PT Field Goal"])) %>% mutate(percentage = made / total) %>% arrange(desc(percentage))
three_percent <- as_tibble(three_percent)
three_percent
library(dplyr)
library(ggplot2)
combined_data <- read.csv("data/shots-data.csv", stringsAsFactors = FALSE)
total_shots_bp <- as_tibble(combined_data %>% select(name) %>% group_by(name) %>% summarise(total = n()) %>% arrange(desc(total)))
total_shots_bp
effective_shooting_bp <- combined_data %>% select(name, shot_made_flag) %>% mutate(count = 1) %>% group_by(name) %>% summarise(total = n(), made = sum(shot_made_flag == "shot_yes")) %>% mutate(percentage = made / total) %>% arrange(desc(percentage))
effective_shooting_bp <- as_tibble(effective_shooting_bp)
effective_shooting_bp
two_percent <- combined_data %>% select(name, shot_made_flag, shot_type) %>% mutate(count = 1) %>% group_by(name) %>% summarise(total = sum(shot_type == "2PT Field Goal"), made = sum(shot_made_flag == "shot_yes" & shot_type == "2PT Field Goal")) %>% mutate(percentage = made / total) %>% arrange(desc(percentage))
two_percent
three_percent <- combined_data %>% select(name, shot_made_flag, shot_type) %>% mutate(count = 1) %>% group_by(name) %>% summarise(total = sum(shot_type == "3PT Field Goal"), made = sum(count[shot_made_flag == "shot_yes" & shot_type == "3PT Field Goal"])) %>% mutate(percentage = made / total) %>% arrange(desc(percentage))
three_percent <- as_tibble(three_percent)
three_percent
library(dplyr)
library(ggplot2)
combined_data <- read.csv("data/shots-data.csv", stringsAsFactors = FALSE)
total_shots_bp <- as_tibble(combined_data %>% select(name) %>% group_by(name) %>% summarise(total = n()) %>% arrange(desc(total)))
total_shots_bp
effective_shooting_bp <- as_tibble(combined_data %>% select(name, shot_made_flag) %>% mutate(count = 1) %>% group_by(name) %>% summarise(total = n(), made = sum(shot_made_flag == "shot_yes")) %>% mutate(percentage = made / total) %>% arrange(desc(percentage)))
effective_shooting_bp
two_percent <- as_tibble(combined_data %>% select(name, shot_made_flag, shot_type) %>% mutate(count = 1) %>% group_by(name) %>% summarise(total = sum(shot_type == "2PT Field Goal"), made = sum(shot_made_flag == "shot_yes" & shot_type == "2PT Field Goal")) %>% mutate(percentage = made / total) %>% arrange(desc(percentage)))
two_percent
three_percent <- as_tibble(combined_data %>% select(name, shot_made_flag, shot_type) %>% mutate(count = 1) %>% group_by(name) %>% summarise(total = sum(shot_type == "3PT Field Goal"), made = sum(count[shot_made_flag == "shot_yes" & shot_type == "3PT Field Goal"])) %>% mutate(percentage = made / total) %>% arrange(desc(percentage)))
three_percent
library(dplyr)
library(ggplot2)
combined_data <- read.csv("data/shots-data.csv", stringsAsFactors = FALSE)
total_shots_bp <- as_tibble(combined_data %>% select(name) %>% group_by(name) %>% summarise(total = n()) %>% arrange(desc(total)))
total_shots_bp
effective_shooting_bp <- as_tibble(combined_data %>% select(name, shot_made_flag) %>% mutate(count = 1) %>% group_by(name) %>% summarise(total = n(), made = sum(shot_made_flag == "shot_yes")) %>% mutate(percentage = 100*made/total) %>% arrange(desc(percentage)))
effective_shooting_bp
two_percent <- as_tibble(combined_data %>% select(name, shot_made_flag, shot_type) %>% mutate(count = 1) %>% group_by(name) %>% summarise(total = sum(shot_type == "2PT Field Goal"), made = sum(shot_made_flag == "shot_yes" & shot_type == "2PT Field Goal")) %>% mutate(percentage = 100*made/total) %>% arrange(desc(percentage)))
two_percent
three_percent <- as_tibble(combined_data %>% select(name, shot_made_flag, shot_type) %>% mutate(count = 1) %>% group_by(name) %>% summarise(total = sum(shot_type == "3PT Field Goal"), made = sum(count[shot_made_flag == "shot_yes" & shot_type == "3PT Field Goal"])) %>% mutate(percentage = 100*made/total) %>% arrange(desc(percentage)))
three_percent
library(dplyr)
library(ggplot2)
combined_data <- read.csv("data/shots-data.csv", stringsAsFactors = FALSE)
effective_shooting <- as_tibble(combined_data %>% select(name, shot_made_flag) %>% mutate(count = 1) %>% group_by(name) %>% summarise(total = n(), made = sum(shot_made_flag == "shot_yes")) %>% mutate(percentage = 100*made/total) %>% arrange(desc(percentage)))
effective_shooting
two_PT <- as_tibble(combined_data %>% select(name, shot_made_flag, shot_type) %>% mutate(count = 1) %>% group_by(name) %>% summarise(total = sum(shot_type == "2PT Field Goal"), made = sum(shot_made_flag == "shot_yes" & shot_type == "2PT Field Goal")) %>% mutate(percentage = 100*made/total) %>% arrange(desc(percentage)))
two_PT
three_PT <- as_tibble(combined_data %>% select(name, shot_made_flag, shot_type) %>% mutate(count = 1) %>% group_by(name) %>% summarise(total = sum(shot_type == "3PT Field Goal"), made = sum(count[shot_made_flag == "shot_yes" & shot_type == "3PT Field Goal"])) %>% mutate(percentage = 100*made/total) %>% arrange(desc(percentage)))
three_pt
library(dplyr)
library(ggplot2)
combined_data <- read.csv("data/shots-data.csv", stringsAsFactors = FALSE)
effective_shooting <- as_tibble(combined_data %>% select(name, shot_made_flag) %>% mutate(count = 1) %>% group_by(name) %>% summarise(total = n(), made = sum(shot_made_flag == "shot_yes")) %>% mutate(percentage = 100*made/total) %>% arrange(desc(percentage)))
effective_shooting
two_pt <- as_tibble(combined_data %>% select(name, shot_made_flag, shot_type) %>% mutate(count = 1) %>% group_by(name) %>% summarise(total = sum(shot_type == "2PT Field Goal"), made = sum(shot_made_flag == "shot_yes" & shot_type == "2PT Field Goal")) %>% mutate(percentage = 100*made/total) %>% arrange(desc(percentage)))
two_pt
three_pt <- as_tibble(combined_data %>% select(name, shot_made_flag, shot_type) %>% mutate(count = 1) %>% group_by(name) %>% summarise(total = sum(shot_type == "3PT Field Goal"), made = sum(count[shot_made_flag == "shot_yes" & shot_type == "3PT Field Goal"])) %>% mutate(percentage = 100*made/total) %>% arrange(desc(percentage)))
three_pt
library(dplyr)
library(ggplot2)
combined_data <- read.csv("data/shots-data.csv", stringsAsFactors = FALSE)
effective_shooting <- as_tibble(combined_data %>% select(name, shot_made_flag) %>% mutate(count = 1) %>% group_by(name) %>% summarise(total = n(), made = sum(shot_made_flag == "shot_yes")) %>% mutate(percentage = 100*made/total) %>% arrange(desc(percentage)))
effective_shooting
effective_shootingg <- arrange( mutate( summarise(group_by(mutate(select(combined_data, name, shot_made_flag), count = 1), name), total=n(), made=sum(shot_made_flag=="shot_yes")), percentage=100*made/total), desc(percentage))
effective_shootingg
two_pt <- as_tibble(combined_data %>% select(name, shot_made_flag, shot_type) %>% mutate(count = 1) %>% group_by(name) %>% summarise(total = sum(shot_type == "2PT Field Goal"), made = sum(shot_made_flag == "shot_yes" & shot_type == "2PT Field Goal")) %>% mutate(percentage = 100*made/total) %>% arrange(desc(percentage)))
two_pt
three_pt <- as_tibble(combined_data %>% select(name, shot_made_flag, shot_type) %>% mutate(count = 1) %>% group_by(name) %>% summarise(total = sum(shot_type == "3PT Field Goal"), made = sum(count[shot_made_flag == "shot_yes" & shot_type == "3PT Field Goal"])) %>% mutate(percentage = 100*made/total) %>% arrange(desc(percentage)))
three_pt
effective_shooting
effective_shootingg
library(dplyr)
library(ggplot2)
combined_data <- read.csv("data/shots-data.csv", stringsAsFactors = FALSE)
effective_shooting <- as_tibble( arrange(mutate(summarise(group_by(mutate(select(combined_data, name, shot_made_flag), count = 1), name), total=n(), made = sum(shot_made_flag == "shot_yes")), percentage = made/total), desc(percentage)) )
effective_shooting
two_pt <- as_tibble(combined_data %>% select(name, shot_made_flag, shot_type) %>% mutate(count = 1) %>% group_by(name) %>% summarise(total = sum(shot_type == "2PT Field Goal"), made = sum(shot_made_flag == "shot_yes" & shot_type == "2PT Field Goal")) %>% mutate(percentage = made/total) %>% arrange(desc(percentage)))
two_pt
two_ptt <- as_tibble( arrange(mutate(summarise(group_by(mutate(select(combined_data, name, shot_made_flag, shot_type), count = 1), name), total = sum(shot_type == "2PT Field Goal"), made = sum(shot_made_flag == "shot_yes" & shot_type == "2PT Field Goal")), percentage = made/total), desc(percentage)) )
three_pt <- as_tibble(combined_data %>% select(name, shot_made_flag, shot_type) %>% mutate(count = 1) %>% group_by(name) %>% summarise(total = sum(shot_type == "3PT Field Goal"), made = sum(count[shot_made_flag == "shot_yes" & shot_type == "3PT Field Goal"])) %>% mutate(percentage = made/total) %>% arrange(mutate(percentage = made/total), desc(percentage)))
library(dplyr)
library(ggplot2)
combined_data <- read.csv("data/shots-data.csv", stringsAsFactors = FALSE)
effective_shooting <- as_tibble( arrange(mutate(summarise(group_by(mutate(select(combined_data, name, shot_made_flag), count = 1), name), total=n(), made = sum(shot_made_flag == "shot_yes")), percentage = made/total), desc(percentage)) )
effective_shooting
two_pt <- as_tibble(combined_data %>% select(name, shot_made_flag, shot_type) %>% mutate(count = 1) %>% group_by(name) %>% summarise(total = sum(shot_type == "2PT Field Goal"), made = sum(shot_made_flag == "shot_yes" & shot_type == "2PT Field Goal")) %>% mutate(percentage = made/total) %>% arrange(desc(percentage)))
two_pt
two_ptt <- as_tibble( arrange(mutate(summarise(group_by(mutate(select(combined_data, name, shot_made_flag, shot_type), count = 1), name), total = sum(shot_type == "2PT Field Goal"), made = sum(shot_made_flag == "shot_yes" & shot_type == "2PT Field Goal")), percentage = made/total), desc(percentage)) )
three_pt <- combined_data %>% select(name, shot_made_flag, shot_type) %>% mutate(count = 1) %>% group_by(name) %>% summarise(total = sum(shot_type == "3PT Field Goal"), made = sum(count[shot_made_flag == "made shot" & shot_type == "3PT Field Goal"])) %>% mutate(percentage = made / total) %>% arrange(desc(percentage))
three_percent <- as_tibble(three_percent)
three_pt
two_pt
two_ptt
library(dplyr)
library(ggplot2)
combined_data <- read.csv("data/shots-data.csv", stringsAsFactors = FALSE)
effective_shooting <- as_tibble( arrange(mutate(summarise(group_by(mutate(select(combined_data, name, shot_made_flag), count = 1), name), total=n(), made = sum(shot_made_flag == "shot_yes")), percentage = made/total), desc(percentage)) )
effective_shooting
two_ptt <- as_tibble( arrange(mutate(summarise(group_by(mutate(select(combined_data, name, shot_made_flag, shot_type), count = 1), name), total = sum(shot_type == "2PT Field Goal"), made = sum(shot_made_flag == "shot_yes" & shot_type == "2PT Field Goal")), percentage = made/total), desc(percentage)) )
two_ptt
three_percent <- combined_data %>% select(name, shot_made_flag, shot_type) %>% mutate(count = 1) %>% group_by(name) %>% summarise(total = sum(shot_type == "3PT Field Goal"), made = sum(count[shot_made_flag == "made shot" & shot_type == "3PT Field Goal"])) %>% mutate(percentage = made / total) %>% arrange(desc(percentage))
three_percent <- as_tibble(three_percent)
three_ptt <- as_tibble(arrange(mutate(summarise(group_by(mutate(select(combined_data, name, shot_made_flag, shot_type), count = 1), name), total = sum(shot_type == "3PT Field Goal"), made = sum(count[shot_made_flag == "made shot" & shot_type == "3PT Field Goal"])), percentage = made/total), desc(percentage)))
three_percent
three_ptt
library(dplyr)
library(ggplot2)
combined_data <- read.csv("data/shots-data.csv", stringsAsFactors = FALSE)
effective_shooting <- as_tibble( arrange(mutate(summarise(group_by(mutate(select(combined_data, name, shot_made_flag), count = 1), name), total=n(), made = sum(shot_made_flag == "shot_yes")), percentage = made/total), desc(percentage)) )
effective_shooting
two_ptt <- as_tibble( arrange(mutate(summarise(group_by(mutate(select(combined_data, name, shot_made_flag, shot_type), count = 1), name), total = sum(shot_type == "2PT Field Goal"), made = sum(shot_made_flag == "shot_yes" & shot_type == "2PT Field Goal")), percentage = made/total), desc(percentage)) )
two_ptt
three_percent <- combined_data %>% select(name, shot_made_flag, shot_type) %>% mutate(count = 1) %>% group_by(name) %>% summarise(total = sum(shot_type == "3PT Field Goal"), made = sum(count[shot_made_flag == "made shot" & shot_type == "3PT Field Goal"])) %>% mutate(percentage = made / total) %>% arrange(desc(percentage))
three_percent <- as_tibble(three_percent)
three_ptt <- as_tibble(arrange(mutate(summarise(group_by(mutate(select(combined_data, name, shot_made_flag, shot_type), count = 1), name), total = sum(shot_type == "3PT Field Goal"), made = sum(count[shot_made_flag == "made shot" & shot_type == "3PT Field Goal"])), percentage = made/total), desc(percentage)))
three_percent
library(dplyr)
library(ggplot2)
combined_data <- read.csv("data/shots-data.csv", stringsAsFactors = FALSE)
effective_shooting <- as_tibble( arrange(mutate(summarise(group_by(mutate(select(combined_data, name, shot_made_flag), count = 1), name), total=n(), made = sum(shot_made_flag == "shot_yes")), percentage = made/total), desc(percentage)) )
effective_shooting
two_ptt <- as_tibble( arrange(mutate(summarise(group_by(mutate(select(combined_data, name, shot_made_flag, shot_type), count = 1), name), total = sum(shot_type == "2PT Field Goal"), made = sum(shot_made_flag == "shot_yes" & shot_type == "2PT Field Goal")), percentage = made/total), desc(percentage)) )
two_ptt
three_percent <- combined_data %>% select(name, shot_made_flag, shot_type) %>% mutate(count = 1) %>% group_by(name) %>% summarise(total = sum(shot_type == "3PT Field Goal"), made = sum(count[shot_made_flag == "shot_yes" & shot_type == "3PT Field Goal"])) %>% mutate(percentage = made / total) %>% arrange(desc(percentage))
three_percent <- as_tibble(three_percent)
three_ptt <- as_tibble(arrange(mutate(summarise(group_by(mutate(select(combined_data, name, shot_made_flag, shot_type), count = 1), name), total = sum(shot_type == "3PT Field Goal"), made = sum(count[shot_made_flag == "shot_yes" & shot_type == "3PT Field Goal"])), percentage = made/total), desc(percentage)))
three_percent]
three_percent
three_ptt
library(dplyr)
library(ggplot2)
combined_data <- read.csv("data/shots-data.csv", stringsAsFactors = FALSE)
#5.1
#Effective Shooting % by Player
effective_shooting <- as_tibble( arrange(mutate(summarise(group_by(mutate(select(combined_data, name, shot_made_flag), count = 1), name), total=n(), made = sum(shot_made_flag == "shot_yes")), percentage = made/total), desc(percentage)) )
effective_shooting
#2PT Effective Shooting % by Player
two_pt <- as_tibble( arrange(mutate(summarise(group_by(mutate(select(combined_data, name, shot_made_flag, shot_type), count = 1), name), total = sum(shot_type == "2PT Field Goal"), made = sum(shot_made_flag == "shot_yes" & shot_type == "2PT Field Goal")), percentage = made/total), desc(percentage)) )
two_pt
#3PT Effective Shooting % by Player
three_pt <- as_tibble(arrange(mutate(summarise(group_by(mutate(select(combined_data, name, shot_made_flag, shot_type), count = 1), name), total = sum(shot_type == "3PT Field Goal"), made = sum(count[shot_made_flag == "shot_yes" & shot_type == "3PT Field Goal"])), percentage = made/total), desc(percentage)))
three_pt
